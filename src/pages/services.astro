---
import SiteLayout from '../layouts/SiteLayout.astro';
import PageHero from '@/components/blocks/PageHero.astro';
import Bento from '@/components/blocks/bento.astro';
import Team from '@/components/blocks/team.astro';
import FAQ from '@/components/blocks/FAQ.astro';
import CTA from '@/components/blocks/CTA.astro';
import type { WebPage, FAQPage, WithContext } from 'schema-dts';

// Page SEO
const title = 'Our Services | Technical SEO Starter';
const description = 'Comprehensive technical SEO services to boost your search engine visibility and website performance.';

// FAQ data - used for both component and schema
const faqs = [
  {
    question: 'What is technical SEO?',
    answer: 'Technical SEO refers to optimizing your website infrastructure to help search engines crawl, index, and render your pages effectively. This includes site speed, mobile-friendliness, structured data, XML sitemaps, and more.',
  },
  {
    question: 'How long does it take to see SEO results?',
    answer: 'SEO is a long-term strategy. While some technical improvements can show results within weeks, most SEO efforts take 3-6 months to show significant improvements in search rankings and organic traffic.',
  },
  {
    question: 'What is structured data and why does it matter?',
    answer: 'Structured data is code (usually JSON-LD) that helps search engines understand your content better. It can enable rich snippets in search results, improving click-through rates and visibility.',
  },
  {
    question: 'Do you offer ongoing SEO support?',
    answer: 'Yes, we offer both one-time audits and ongoing SEO retainers. Technical SEO requires continuous monitoring as search engines update their algorithms and your site evolves.',
  },
];

// Schema.org - WebPage + FAQPage combined
const webPageSchema: WithContext<WebPage> = {
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: title,
  description,
  url: new URL('/services', Astro.site).toString(),
  breadcrumb: {
    '@type': 'BreadcrumbList',
    itemListElement: [
      { '@type': 'ListItem', position: 1, name: 'Home', item: Astro.site?.toString() },
      { '@type': 'ListItem', position: 2, name: 'Services' },
    ],
  },
};

const faqSchema: WithContext<FAQPage> = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: faqs.map((faq) => ({
    '@type': 'Question',
    name: faq.question,
    acceptedAnswer: {
      '@type': 'Answer',
      text: faq.answer,
    },
  })),
};

// Pass both schemas as array
const schemas = [webPageSchema, faqSchema];
---

<SiteLayout title={title} description={description} schema={schemas}>
  <PageHero 
    badge="Professional Services"
    title="Technical SEO Solutions"
    description="Elevate your digital presence with our expert technical SEO services. From comprehensive audits to performance optimization, we deliver measurable results."
  />
  
  <div id="content">
    <Bento />
    <Team />
    <FAQ faqs={faqs} />
  </div>
  
  <CTA />
</SiteLayout>

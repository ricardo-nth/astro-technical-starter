---
/**
 * Web Vitals tracking component
 * Loads and initializes Core Web Vitals monitoring
 */
import { shouldEnableAnalytics } from '../../utils/env';

const enableAnalytics = shouldEnableAnalytics();
---

{enableAnalytics && (
  <script type="module" is:inline>
    try {
      // Import the bundled client module
      await import('/src/client/vitals.js');
    } catch (error) {
      // web-vitals library not available - fail silently
      if (import.meta.env.DEV) {
        console.warn('Web Vitals tracking failed to initialize:', error);
      }
    }
  </script>
)}

<!-- Preconnect to analytics endpoints for better performance -->
{enableAnalytics && (
  <>
    <link rel="preconnect" href="https://www.google-analytics.com" />
    <link rel="preconnect" href="https://www.googletagmanager.com" />
  </>
)}

<!-- 
  This component should be included in the base layout
  It will automatically track Core Web Vitals and send data to analytics
-->

---
import BaseLayout from './BaseLayout.astro';
import Header from '../components/blocks/Header.astro';
import Footer from '../components/blocks/Footer.astro';
import type { Thing, WithContext } from 'schema-dts';

export interface Props {
  title: string;
  description: string;
  image?: string;
  noindex?: boolean;
  schema?: WithContext<Thing> | WithContext<Thing>[];
}

const { title, description, image, noindex, schema } = Astro.props;

const navLinks = [
  { label: 'Home', href: '/' },
  { label: 'Services', href: '/services' },
  { label: 'Contact', href: '/contact' },
];
---

<BaseLayout title={title} description={description} image={image} noindex={noindex} schema={schema}>
  <div class="site-layout">
    <Header links={navLinks} />
    
    <main class="main-content" role="main">
      <slot />
    </main>
    
    <Footer links={navLinks} />
  </div>
</BaseLayout>

<style>
  .site-layout {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .main-content {
    flex: 1;
    width: 100%;
  }

  /* Ensure proper stacking context */
  .site-layout > * {
    position: relative;
    z-index: 1;
  }

  /* Handle sticky navigation positioning */
  .main-content {
    /* Account for sticky navigation height if needed */
    scroll-margin-top: 4rem;
  }

  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  /* Print styles */
  @media print {
    .notification-bar,
    nav,
    .footer-social,
    .cta-button {
      display: none !important;
    }
    
    .site-layout {
      min-height: auto;
    }
    
    .main-content {
      flex: none;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .site-layout {
      background: white;
      color: black;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>
